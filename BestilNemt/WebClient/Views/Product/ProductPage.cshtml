@using WebClient.BestilNemtServiceRef
@model global::WebClient.Models.ProductPartOrderViewModel

@{
    ViewBag.Title = "Product Page";
}

<h1>@Model.Product.Name</h1>
<div id="ProductPicture">
    <img alt="" height="350" src="/Images/ProductPictures/@Model.Product.ImgPath" width="350">
</div>
<div id="ProductInformation">
    <div id="BuyModul">
        <p>Pris: @Model.Product.Price kr</p>
        @using (Html.BeginForm("AddProductToCart", "Product", FormMethod.Post))
        {
            <select name="Amount">
                @{
                    var shop = (Shop)Session["Shop"];
                    var proxy = new BestilNemtServiceClient();
                    var warehouses = proxy.FindAllWarehousesByShopId(shop.Id);

                    var maxAmount = 0;
                    foreach (var warehouse in warehouses)
                    {
                        if (warehouse.Product.Id == @Model.Product.Id)
                        {
                            maxAmount = warehouse.Stock;
                        }
                    }
                    for (var i = 1; i <= maxAmount; i++)
                    {
                        <option value="@i">@i</option>
                    }
                }
            </select><br>

                    @Html.HiddenFor(x => x.Product.Id)
                    <button type="submit" onclick="alert('@Model.Product.Name er tilføjet til kurven');">Tilføj til kurv</button>
                    }
    </div>

    <div id="descriptionBox">
        <h3>Produkt information</h3>
        <p>@Model.Product.Description</p>
    </div>
</div>